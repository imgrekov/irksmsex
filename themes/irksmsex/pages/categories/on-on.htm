title = "Объявления для геев"
url = "/categories/on-on"
layout = "advert"
description = "Парень ищет парня"
attr = "on-on"
is_hidden = 0

[builderList AdvertsList]
modelClass = "Grekov\AdvertsList\Models\Advert"
scope = "-"
scopeValue = "{{ :scope }}"
displayColumn = "id"
noRecordsMessage = "Здесь пока нет объявлений. Добавьте его первым"
detailsPage = "-"
detailsKeyColumn = "id"
detailsUrlParameter = "id"
recordsPerPage = 50
pageNumber = "{{ :page }}"
sortColumn = "type"
sortDirection = "desc"

[session]
security = "all"
==
{% set records = AdvertsList.records %}
{% set displayColumn = AdvertsList.displayColumn %}
{% set noRecordsMessage = AdvertsList.noRecordsMessage %}
{% set detailsPage = AdvertsList.detailsPage %}
{% set detailsKeyColumn = AdvertsList.detailsKeyColumn %}
{% set detailsUrlParameter = AdvertsList.detailsUrlParameter %}


<ul class="record-list">
  {% for record in records %}

  {% if record.category == 'on-on' and record.type != 'xvip' %}

  <li class="{% if record.type == 'vip' %}vip{% elseif record.type == 'basic' %}basic{% endif %}
  {% if record.highlight == 'on' %}gold{% endif %}">
    <div id="{{ record.id }}" class="sms">
      <!-- Время добавления объявления -->

      {% if record.type == 'vip' %}
      <img src="{{ 'assets/images/vip.png'|theme }}" alt="vip">
      {% endif %}

      <span class="timehead">
        {{ record.created_at|date('d-m-Y H:i') }}
      </span>

      <!-- <span class="views">0</span> -->
      <!-- /.views -->

      <!-- Текст объявления -->
      <div class="record-text">
        {{ record.text|raw }}
      </div>

      
      {% if record.image1 %}
      <div class="advert__imgs-wrap">
        <div class="advert__image"><img src="{{ record.image1|media }}" alt="Фото1"></div>

        {% if record.image2 %}
        <div class="advert__image"><img src="{{ record.image2|media }}" alt="Фото2"></div>
        {% endif %}
        {% if record.image3 %}
        <div class="advert__image"><img src="{{ record.image3|media }}" alt="Фото3"></div>
        {% endif %}

      </div>
      {% endif %}

    </div>
  </li>
  {% endif %}


  {% else %}
  <li class="advert-none">{{ noRecordsMessage }}</li>
  {% endfor %}

</ul>

{% if records.lastPage > 1 %}
<ul class="pagination">
  {% if records.currentPage > 1 %}
  <li><a href="{{ this.page.baseFileName|page({ (pageParam): (records.currentPage-1) }) }}">&larr; Prev</a></li>
  {% endif %}

  {% for page in 1..records.lastPage %}
  <li class="{{ records.currentPage == page ? 'active' : null }}">
    <a href="{{ this.page.baseFileName|page({ (pageParam): page }) }}">{{ page }}</a>
  </li>
  {% endfor %}

  {% if records.lastPage > records.currentPage %}
  <li><a href="{{ this.page.baseFileName|page({ (pageParam): (records.currentPage+1) }) }}">Next &rarr;</a></li>
  {% endif %}
</ul>
{% endif %}